<div class="range">
  <label for="car-1-set_differential_speed" class="form-label"></label>
  <input type="range" orient="vertical" class="form-range" min="-50" max="50" step="1" value="0" id="car-1-set_differential_speed" />
</div>
<script>
function car_1_set_differential_speed (differential_speed, set_range) {
  $.ajax({
    url: "http://10.0.0.59:5000/call/car-1/set_differential_speed?differential_speed=int:" + differential_speed,
    type: "GET"
  });
  if (set_range) {
    $("#car-1-set_differential_speed")[0].value = differential_speed;
  }
}
$("#car-1-set_differential_speed").on("input", function () {
  car_1_set_differential_speed($("#car-1-set_differential_speed")[0].value, false);
});
$("#car-1-set_differential_speed").on("mouseup touchend", function () {
  car_1_set_differential_speed(0, true);
});
window.addEventListener("keydown", (event) => {
  current_differential_speed = parseInt($("#car-1-set_differential_speed")[0].value);
  switch (event.key) {
    case "Right":
    case "ArrowRight":
      if (current_differential_speed > 0) {
        current_differential_speed = 0;
      }
      car_1_set_differential_speed(current_differential_speed - 1, true);
      break;
    case "Left":
    case "ArrowLeft":
      if (current_differential_speed < 0) {
        current_differential_speed = 0;
      }
      car_1_set_differential_speed(current_differential_speed + 1, true);
      break;
    case " ":
      car_1_set_differential_speed(0, true);
      break;
  }
  event.preventDefault();
}, true);
</script>
